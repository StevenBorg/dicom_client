---

title: Helpers

keywords: fastai
sidebar: home_sidebar

summary: "Working with a DICOMweb API endpoint can involve a number of steps. This module provides helper functions. "
description: "Working with a DICOMweb API endpoint can involve a number of steps. This module provides helper functions. "
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_helpers.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Python Requests and HTTPX libraries do not natively support passing files as multipart/related in an HTTP request. Thus we need to create a helper function to encode a group of 'fields' (or files) in a body with portions separated with an appropriate boudary.  We can use the urllib3 library to provide much of the needed functionality.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="encode_multipart_related" class="doc_header"><code>encode_multipart_related</code><a href="https://github.com/stevenborg/dicom_client/tree/master/dicom_client/helpers.py#L9" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>encode_multipart_related</code>(<strong><code>fields</code></strong>, <strong><code>boundary</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The DICOMweb standard provides a number of different REST endpoints that allow for efficient retrieval of DICOM metadata and image data. There is a firm structure for how you must query data, however. If you are interested in retrieving metadata about a Series (for instance), you must also pass the parent Study. To retrieve a list of Frames, you must pass the Study, Series and Instance that 'parent' the frames.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="construct_dicom_url_path" class="doc_header"><code>construct_dicom_url_path</code><a href="https://github.com/stevenborg/dicom_client/tree/master/dicom_client/helpers.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>construct_dicom_url_path</code>(<strong><code>study_uid</code></strong>, <strong><code>series_uid</code></strong>=<em><code>None</code></em>, <strong><code>instance_uid</code></strong>=<em><code>None</code></em>, <strong><code>frames</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Likewise, when we are retrieving data, we must pass the correct header. We want to retrieve Frames as an octet-stream, Instances as application/dicom objects, and Series/Studies as multipart.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>TODO:This function currently assumes that the transfer-sytax is <em>. Update to support additional transfer syntaxes. Also note that </em> is NOT part of the DICOM standard, but is widely accepted by DICOMweb endpoints to return images in whatever encoding the image was initially provided.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="construct_retrieve_header" class="doc_header"><code>construct_retrieve_header</code><a href="https://github.com/stevenborg/dicom_client/tree/master/dicom_client/helpers.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>construct_retrieve_header</code>(<strong><code>study_uid</code></strong>, <strong><code>series_uid</code></strong>=<em><code>None</code></em>, <strong><code>instance_uid</code></strong>=<em><code>None</code></em>, <strong><code>frames</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When calling a DICOMweb endpoint, it's often useful to gather information about the request/response HTTP that was made. <a href="/dicom_client/helpers#get_http_response_dict"><code>get_http_response_dict</code></a> parses a Requests or HTTPX request and returns an ordered dict with information about the REST call.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_http_response_dict" class="doc_header"><code>get_http_response_dict</code><a href="https://github.com/stevenborg/dicom_client/tree/master/dicom_client/helpers.py#L64" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_http_response_dict</code>(<strong><code>response</code></strong>, <strong><code>is_binary</code></strong>=<em><code>False</code></em>, <strong><code>filename</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

